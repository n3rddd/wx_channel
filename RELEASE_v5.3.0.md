# 🎉 wx_channel v5.3.0 发布

## 📅 发布信息

- **版本号**：v5.3.0
- **发布日期**：2026-01-18
- **上一版本**：v5.2.11

## ✨ 主要更新

### 🚀 通用批量下载组件

这是本次更新的核心功能！我们创建了统一的批量下载组件，所有页面（Home、Profile、Search）现在共享同一套下载逻辑和 UI。

**核心改进：**
- ✅ 减少 400+ 行重复代码
- ✅ 统一的用户体验
- ✅ 更易维护和扩展

**新增功能：**
- 强制重新下载选项
- 取消下载功能
- 实时进度显示（进度条 + 文本）
- 导出列表（含解密密钥）
- 清空列表功能
- 下载完成后进度条自动隐藏

### 🏠 Home 页面分类视频下载

全新功能！现在可以批量下载 Home 页面的分类视频了。

**使用方法：**
1. 切换到想要的分类（如"美食"）
2. 滚动加载更多视频
3. 点击工具栏下载图标
4. 选择视频，批量下载

**技术实现：**
- 自动识别当前 Tab
- 拦截 `finderGetRecommend` API
- 数据累积（自动去重）
- 最多采集 300 个视频

### 📊 视频列表优化

**视觉改进：**
- 封面尺寸：60x40（16:9 比例）
- 时长显示在封面右下角（黑色半透明背景）
- 完整信息：文件大小、发布日期、作者昵称
- 分页显示：50个/页

### 🔍 搜索页面增强

**新功能：**
- 显示视频和直播数据
- 直播带红色"直播"标签
- 直播复选框禁用（暂不支持下载）
- 自动清理标题中的 HTML 标签

### 📸 页面快照功能

恢复了页面快照保存功能：
- 保存路径：`downloads/page_snapshots/YYYY-MM-DD/`
- 包含 HTML 和 metadata
- 控制台显示保存路径

## 🐛 Bug 修复

1. **下载成功但显示失败** - 添加 HTTP 状态码检查
2. **视频复选框被错误禁用** - 优化变量声明顺序
3. **标题包含 HTML 元素** - 自动清理 HTML 标签
4. **搜索页直播数据被过滤** - 正确显示直播数据

## 📚 文档优化

1. **文档重新整理**
   - 用户文档：`docs/` 目录
   - 开发文档：`dev-docs/` 目录
   - 结构更清晰，便于查找

2. **资源文件管理**
   - 创建 `assets/` 目录
   - 集中管理所有图片资源

3. **链接修复**
   - 修复所有文档链接
   - 确保引用正确

## 📦 下载

- [wx_channel.exe](./wx_channel.exe) - Windows 可执行文件（约 12 MB）

## 📖 文档

- [使用文档](docs/README.md) - 用户使用指南
- [API 文档](docs/API_README.md) - HTTP API 接口
- [构建指南](docs/BUILD.md) - 从源码编译
- [更新日志](dev-docs/CHANGELOG.md) - 完整更新记录

## 🎯 升级建议

**强烈推荐升级到 v5.3.0！**

理由：
1. ✅ 全新的批量下载体验
2. ✅ 新增 Home 页面分类视频下载
3. ✅ 修复了多个重要 Bug
4. ✅ 文档结构更清晰

## 📝 使用说明

### 批量下载 Home 页面分类视频

```
1. 打开视频号网页版
2. 切换到想要的分类（如"美食"）
3. 滚动加载更多视频
4. 点击顶部工具栏左侧的下载图标 📥
5. 选择视频，点击"开始下载"
```

### 批量下载 Profile 页面视频

```
1. 访问任意用户主页
2. 滚动加载更多视频
3. 点击顶部工具栏左侧的下载图标 📥
4. 选择视频，点击"开始下载"
```

### 批量下载搜索结果

```
1. 搜索关键词
2. 滚动加载结果
3. 点击顶部工具栏左侧的下载图标 📥
4. 选择视频，点击"开始下载"
```

## 🔧 技术亮点

- **代码优化**：减少 400+ 行重复代码
- **统一架构**：通用批量下载组件
- **数据格式化**：`WXU.format_feed()` 统一处理
- **错误处理**：完善的 HTTP 状态码检查
- **用户体验**：实时进度、取消下载、导出列表

## 🙏 致谢

感谢所有用户的反馈和建议！

特别感谢提出以下需求的用户：
- 强制重新下载功能
- 取消下载功能
- 完整的视频信息显示
- 导出列表功能
- Home 页面分类视频下载

## 📮 反馈

如有问题或建议，欢迎：
- 提交 [GitHub Issues](https://github.com/nobiyou/wx_channel/issues)
- 查看 [故障排查文档](docs/TROUBLESHOOTING.md)

---

**发布日期：** 2026-01-18  
**版本号：** v5.3.0  
**构建信息：** Go 1.23+, Windows AMD64

祝使用愉快！🎊
