# 前端功能测试指南

## 测试环境准备

### 1. 编译前端
```bash
cd hub_server/frontend
npm install
npm run build
```

### 2. 启动 Hub Server
```bash
cd hub_server
go build -o hub_server.exe
./hub_server.exe
```

### 3. 访问前端
打开浏览器访问：http://localhost:8080

## 测试内容

### 一、布局测试

#### 1.1 侧边栏布局
- [ ] 访问 `/dashboard` - 应该看到左侧侧边栏
- [ ] 访问 `/search` - 应该看到左侧侧边栏
- [ ] 访问 `/devices` - 应该看到左侧侧边栏
- [ ] 访问 `/tasks` - 应该看到左侧侧边栏
- [ ] 访问 `/monitoring` - 应该看到左侧侧边栏
- [ ] 访问 `/settings` - 应该看到左侧侧边栏

#### 1.2 侧边栏内容
- [ ] 侧边栏显示 "Hub Control" 标题
- [ ] Core 分组包含：在线终端、穿透搜索
- [ ] Management 分组包含：设备管理、任务追踪、系统监控、系统设置
- [ ] 底部显示在线状态

#### 1.3 顶部栏
- [ ] 显示当前页面标题
- [ ] 显示当前页面描述
- [ ] 右上角显示用户名和邮箱
- [ ] 右上角显示用户头像（首字母）

### 二、设备管理页面测试

#### 2.1 页面访问
- [ ] 点击侧边栏"设备管理"
- [ ] URL 变为 `/devices`
- [ ] 页面标题显示"设备管理"

#### 2.2 统计卡片
- [ ] 显示"总设备数"卡片
- [ ] 显示"在线设备"卡片（绿色）
- [ ] 显示"离线设备"卡片（灰色）
- [ ] 数字正确统计

#### 2.3 设备列表
- [ ] 显示所有绑定的设备
- [ ] 在线设备显示绿色圆点和"在线"标签
- [ ] 离线设备显示灰色圆点和"离线"标签
- [ ] 显示设备 ID、版本、主机名
- [ ] 显示最后在线时间和绑定时间

#### 2.4 刷新功能
- [ ] 点击"刷新"按钮
- [ ] 图标旋转动画
- [ ] 设备列表重新加载

#### 2.5 解绑设备
- [ ] 点击某个设备的"解绑"按钮
- [ ] 弹出确认对话框
- [ ] 对话框显示设备 ID
- [ ] 点击"取消"关闭对话框
- [ ] 点击"确认"执行解绑
- [ ] 解绑成功后列表自动刷新

#### 2.6 删除设备
- [ ] 点击某个设备的"删除"按钮
- [ ] 弹出确认对话框（红色）
- [ ] 对话框显示警告信息
- [ ] 点击"取消"关闭对话框
- [ ] 点击"确认"执行删除
- [ ] 删除成功后列表自动刷新
- [ ] 设备从列表中消失

### 三、导航测试

#### 3.1 侧边栏导航
- [ ] 点击"在线终端" - 跳转到 `/dashboard`
- [ ] 点击"穿透搜索" - 跳转到 `/search`
- [ ] 点击"设备管理" - 跳转到 `/devices`
- [ ] 点击"任务追踪" - 跳转到 `/tasks`
- [ ] 点击"系统监控" - 跳转到 `/monitoring`
- [ ] 点击"系统设置" - 跳转到 `/settings`

#### 3.2 当前页面高亮
- [ ] 当前页面在侧边栏中高亮显示
- [ ] 高亮样式：凹陷效果 + 主题色文字

### 四、响应式测试

#### 4.1 桌面端（>1024px）
- [ ] 侧边栏固定宽度 256px
- [ ] 主内容区域自适应
- [ ] 布局正常显示

#### 4.2 平板端（768px-1024px）
- [ ] 侧边栏正常显示
- [ ] 内容区域自适应
- [ ] 无横向滚动条

#### 4.3 移动端（<768px）
- [ ] 侧边栏可能需要折叠（待实现）
- [ ] 内容区域占满屏幕

### 五、API 测试

#### 5.1 获取设备列表
```bash
curl -X GET http://localhost:8080/api/device/list \
  -H "Authorization: Bearer YOUR_TOKEN"
```
预期：返回设备数组

#### 5.2 解绑设备
```bash
curl -X POST http://localhost:8080/api/device/unbind \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"device_id": "MAC-xxx"}'
```
预期：返回成功消息

#### 5.3 删除设备
```bash
curl -X POST http://localhost:8080/api/device/delete \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"device_id": "MAC-xxx"}'
```
预期：返回成功消息

### 六、错误处理测试

#### 6.1 未登录
- [ ] 未登录访问 `/devices`
- [ ] 自动跳转到 `/login`

#### 6.2 无设备
- [ ] 账号没有绑定设备
- [ ] 显示空状态提示
- [ ] 提示"暂无设备"

#### 6.3 网络错误
- [ ] 关闭 Hub Server
- [ ] 刷新设备列表
- [ ] 显示错误提示

#### 6.4 权限错误
- [ ] 尝试删除其他用户的设备
- [ ] 返回 403 Forbidden

## 已知问题

### 问题 1：前端未编译
**现象**：访问页面显示旧版本或 404
**解决**：
```bash
cd hub_server/frontend
npm run build
```

### 问题 2：侧边栏不显示
**现象**：页面使用顶部导航而不是侧边栏
**检查**：
1. 路由配置是否有 `layout: 'Sidebar'`
2. App.vue 是否正确导入 SidebarLayout
3. 浏览器控制台是否有错误

### 问题 3：设备列表为空
**现象**：页面显示"暂无设备"
**检查**：
1. 是否有设备绑定到当前用户
2. API `/api/device/list` 是否返回数据
3. 浏览器控制台是否有错误

### 问题 4：删除/解绑失败
**现象**：点击按钮后显示错误
**检查**：
1. 是否登录
2. Token 是否有效
3. 设备是否属于当前用户
4. 后端日志是否有错误

## 测试通过标准

- [ ] 所有页面正确显示侧边栏
- [ ] 设备管理页面功能完整
- [ ] 解绑和删除功能正常工作
- [ ] 导航切换流畅
- [ ] 无 JavaScript 错误
- [ ] 无 API 错误
- [ ] 响应式布局正常

## 测试完成后

测试通过后，执行以下命令推送到 GitHub：

```bash
git add .
git commit -m "feat: 启用侧边栏布局和设备管理功能"
git push origin feature/centralized-management
```

---

**测试日期**：_____________  
**测试人员**：_____________  
**测试结果**：□ 通过  □ 失败  
**备注**：_____________
